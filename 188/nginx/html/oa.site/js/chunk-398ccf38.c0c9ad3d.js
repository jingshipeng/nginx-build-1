(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-398ccf38"],{"10f8":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/brand",method:"get",params:e})}},"2edf":function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/crmClass",method:"get",params:e})}},4324:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/SEMUnit/GetListByPlan",method:"get",params:e})}},"732a":function(e,t,a){"use strict";a.d(t,"e",function(){return n}),a.d(t,"f",function(){return u}),a.d(t,"g",function(){return o}),a.d(t,"h",function(){return c}),a.d(t,"m",function(){return i}),a.d(t,"n",function(){return m}),a.d(t,"i",function(){return s}),a.d(t,"j",function(){return d}),a.d(t,"a",function(){return l}),a.d(t,"b",function(){return h}),a.d(t,"o",function(){return y}),a.d(t,"c",function(){return f}),a.d(t,"d",function(){return p}),a.d(t,"k",function(){return b}),a.d(t,"l",function(){return w});var r=a("b775");function n(e){return Object(r["b"])({url:"/KeywordSummary/GetKeywordQueryWater",method:"get",params:e})}function u(e){return Object(r["b"])({url:"/KeywordSummary/KeywordQueryWaterColunms",method:"get",params:e})}function o(e){return Object(r["b"])({url:"/KeywordSummary/GetKeywordWater",method:"get",params:e})}function c(e){return Object(r["b"])({url:"/KeywordSummary/KeywordWaterColunms",method:"get",params:e})}function i(e){return Object(r["b"])({url:"/KeywordSummary/GetUnit",method:"get",params:e})}function m(e){return Object(r["b"])({url:"/KeywordSummary/UnitColunms",method:"get",params:e})}function s(e){return Object(r["b"])({url:"/KeywordSummary/GetPlan",method:"get",params:e})}function d(e){return Object(r["b"])({url:"/KeywordSummary/PlanColunms",method:"get",params:e})}function l(e){return Object(r["b"])({url:"/KeywordSummary/GetAccount",method:"get",params:e})}function h(e){return Object(r["b"])({url:"/KeywordSummary/AccountColunms",method:"get",params:e})}function y(e){return Object(r["b"])({url:"/SEMKeyword/GetKeywordSearch",method:"get",params:e})}function f(e){return Object(r["b"])({url:"/KeywordSummary/GetKeyword",method:"get",params:e})}function p(e){return Object(r["b"])({url:"/KeywordSummary/KeywordColunms",method:"get",params:e})}function b(e){return Object(r["b"])({url:"/KeywordSummary/GetQuery",method:"get",params:e})}function w(e){return Object(r["b"])({url:"/KeywordSummary/QueryColunms",method:"get",params:e})}},a94f:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"components-form-demo-advanced-search"}},[a("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:e.form},on:{submit:e.handleSearch}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"日期"}},[a("a-range-picker",{style:{width:"256px"},model:{value:e.defaultDate,callback:function(t){e.defaultDate=t},expression:"defaultDate"}},[a("template",{slot:"renderExtraFooter"},[e._v("可选区间90天")])],2)],1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{on:{click:function(t){return e.timeSearch(-1)}}},[e._v("上一天")]),a("a-button",{style:{marginLeft:"8px"},on:{click:function(t){return e.timeSearch(1)}}},[e._v("下一天")]),a("a-button",{style:{marginLeft:"8px"},attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("搜索")]),a("a-button",{style:{marginLeft:"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),a("a",{style:{marginLeft:"8px",fontSize:"12px"},on:{click:e.toggle}},[e._v("\n            高级搜索\n            "),a("a-icon",{attrs:{type:e.expand?"up":"down"}})],1)],1)],1),a("a-row",{style:{display:e.count?"block":"none"},attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"关键词"}},[a("a-auto-complete",{attrs:{placeholder:"输入关键词"},on:{search:e.handleSearchKeyword},model:{value:e.queryParam.onlyKeywordId,callback:function(t){e.$set(e.queryParam,"onlyKeywordId",t)},expression:"queryParam.onlyKeywordId"}},[a("template",{slot:"dataSource"},e._l(e.otherParam.keywordSource,function(t){return a("a-select-option",{key:t.keywordId+""},[e._v(e._s(t.keyword))])}),1)],2)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"搜索词"}},[a("a-auto-complete",{attrs:{placeholder:"输入搜索词"},on:{search:e.handleSearchQuery},model:{value:e.queryParam.onlyQuerywordId,callback:function(t){e.$set(e.queryParam,"onlyQuerywordId",t)},expression:"queryParam.onlyQuerywordId"}},[a("template",{slot:"dataSource"},e._l(e.otherParam.querySource,function(t){return a("a-select-option",{key:t.keywordId+""},[e._v(e._s(t.keyword))])}),1)],2)],1)],1)],1)],1)],1),a("a-breadcrumb",e._l(e.otherParam.breadcrumbData,function(t){return a("a-breadcrumb-item",{key:t.key,attrs:{value:t.vlue}},[t.name?a("a",{on:{click:function(a){return e.breadcrumbSearchLoadData(t.key,t.value)}}},[e._v(e._s(t.name))]):e._e()])}),1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:4}},[a("a-input-search",{staticStyle:{width:"200px"},attrs:{placeholder:e.otherParam.valueName+"搜索"},on:{pressEnter:e.menuNameEnterSearch,search:e.menuNameSearch}}),a("a-menu",{attrs:{mode:"inline"},on:{click:e.menuSearchFun}},e._l(e.otherParam.menuSearchData,function(t){return a("a-menu-item",{key:t.key,attrs:{value:t.value,title:t.name}},[e._v(e._s(t.name))])}),1)],1),a("a-col",{attrs:{span:20}},[a("s-table",{ref:"table",attrs:{orignColumns:e.columns,data:e.loadData,scroll:{x:110},pageSize:20,bordered:"",size:"middle"},scopedSlots:e._u([{key:"notConnectCountRatio",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:5,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"query",fn:function(t,r){return a("span",{},[a("router-link",{attrs:{to:{path:"/Pop/Keyword/"+r.onlyQuerywordId+"/KeywordDetail",query:{onlyQuerywordId:r.onlyQuerywordId,title:t+"-线索分析"}}}},[e._v(e._s(t))])],1)}}])})],1)],1)],1)},n=[],u=(a("ac6a"),a("7f7f"),a("a481"),a("28a5"),a("2af9")),o=a("732a"),c=a("2edf"),i=(a("10f8"),a("cd76")),m=a("d6df"),s=a("4324"),d=a("c1df"),l=a.n(d),h=a("ca00"),y={name:"clue-out-txid-list",components:{STable:u["q"],Ellipsis:u["g"]},data:function(){var e=this;return{dateFormat:"YYYY-MM-DD",dateIntFormat:"YYYYMMDD",dateJsFormat:"yyyyMMdd",expand:!1,form:this.$form.createForm(this),brandSource:[],queryParam:{startTime:"",endTime:""},otherParam:{sectionDay:-1,isRefreshData:!1,isMonitorTime:!1,isOneDayTime:!1,keywordSource:[],querySource:[],keyupValue:[],menuSearchData:[],breadcrumbData:[{value:0,name:"全部推广",key:21446},{value:1},{value:2},{value:3},{value:4}],currentMenuKey:0,currentMenuValue:0,valueName:"名称"},columns:[],loadData:function(t){e.queryParam.startTime||(e.defaultDate=e.generatorDate(-1));var a=/[0-9]/;if(!e.queryParam.onlyKeywordId||a.test(e.queryParam.onlyKeywordId)){if(!e.queryParam.onlyQuerywordId||a.test(e.queryParam.onlyQuerywordId))return Object(o["k"])(Object.assign(t,e.queryParam)).then(function(e){return e});e.$notification.info({message:"提示",description:"请选择一个搜索词"})}else e.$notification.info({message:"提示",description:"请选择一个关键词"})},CrmClass20025:[],defaultDate:[]}},watch:{defaultDate:function(e){if(0!=e.length)return this.otherParam.originTime=e[0].format(this.dateFormat),this.queryParam.startTime=e[0].format(this.dateIntFormat),void(this.queryParam.endTime=e[1].format(this.dateIntFormat));delete this.queryParam.ClueTime}},created:function(){var e=this;Object(o["l"])().then(function(t){t.success&&(e.columns=t.data)}),this.menuSearchLoadData(21446,1)},computed:{count:function(){return this.expand}},methods:{moment:l.a,timeSearch:function(e){this.defaultDate=this.generatorDate(e,new Date(this.otherParam.originTime)),this.$refs.table.refresh(!0)},generatorDate:function(e,t){t||(t=new Date),this.otherParam.sectionDay=e;var a=Object(h["b"])(e,t).split(",");return this.queryParam.startTime=a[0].replace(/-/g,""),this.queryParam.endTime=a[1].replace(/-/g,""),[this.moment(a[0],this.dateFormat),this.moment(a[1],this.dateFormat)]},handleSearch:function(e){e.preventDefault(),this.form.validateFields(function(e,t){console.log("error",e),console.log("Received values of form: ",t)})},toggle:function(){this.expand=!this.expand},handleSearchKeyword:function(e){this.handleSearchKeywordByType(e,1)},handleSearchQuery:function(e){this.handleSearchKeywordByType(e,2)},handleSearchKeywordByType:function(e,t){var a=this,r=/[\u4E00-\u9FA5\uF900-\uFA2D]/,n=/[0-9]/;(r.test(e)||n.test(e))&&(r.test(e)&&(e=e.replace(/[0-9]/g,"").replace("[]","").replace(/[a-zA-Z]/g,"")),this.otherParam.keyupValue[this.otherParam.keyupValue.length-1]!=e&&(this.otherParam.keyupValue.push(e),setTimeout(function(){Object(o["o"])({keyword:a.otherParam.keyupValue[a.otherParam.keyupValue.length-1].replace(/ /g,"")}).then(function(e){var r=e.data.map(function(e){return{keywordId:e.keywordId,keyword:"["+e.keywordId+"]"+e.keyword}});switch(t){case 1:a.otherParam.keywordSource=r;break;case 2:a.otherParam.querySource=r;break}for(var n=a.otherParam.keyupValue.length-1;n>=0;n--)n>0&&a.otherParam.keyupValue.splice(0,1)})},1e3)))},menuSearchFun:function(e){this.menuSearchLoadData(e.key,e.item.value+1);var t=this.otherParam.breadcrumbData.filter(function(t){return t.value==e.item.value})[0];t.name=e.item.title,t.key=e.key},menuSearchLoadData:function(e,t,a){var r=this;switch(console.log(e,t,a),this.otherParam.currentMenuKey=e,this.otherParam.currentMenuValue=t,t){case 1:delete this.queryParam.accountId,delete this.queryParam.planId,delete this.queryParam.unitId,this.otherParam.valueName="媒体",Object(c["a"])({ParentId:e,name:a}).then(function(e){r.otherParam.menuSearchData=e.data.map(function(e){return{key:e.value,name:e.name,value:1}})});break;case 2:delete this.queryParam.accountId,delete this.queryParam.planId,delete this.queryParam.unitId,this.otherParam.valueName="账户",Object(i["a"])({mediaId:e,name:a}).then(function(e){r.otherParam.menuSearchData=e.data.map(function(e){return{key:e.accountId,name:e.accountName,value:2}})});break;case 3:this.queryParam.accountId=e,delete this.queryParam.unitId,this.otherParam.valueName="计划",Object(m["a"])({accountId:e,name:a}).then(function(e){r.otherParam.menuSearchData=e.data.map(function(e){return{key:e.planId,name:e.planName,value:3}})});break;case 4:this.queryParam.planId=e,this.otherParam.valueName="单元",Object(s["a"])({planId:e,name:a}).then(function(e){r.otherParam.menuSearchData=e.data.map(function(e){return{key:e.unitId,name:e.unitName,value:4}})});break;case 5:this.queryParam.unitId=e;break}t>2&&this.$refs.table&&this.$refs.table.refresh(!0)},breadcrumbSearchLoadData:function(e,t){this.otherParam.breadcrumbData.forEach(function(e){e.value>t&&(e.name="")}),this.menuSearchLoadData(e,t+1)},menuNameSearch:function(e){this.menuSearchLoadData(this.otherParam.currentMenuKey,this.otherParam.currentMenuValue,e)},menuNameEnterSearch:function(e){this.menuNameSearch(e.target.value)}}},f=y,p=(a("d31b"),a("2877")),b=Object(p["a"])(f,r,n,!1,null,null,null);t["default"]=b.exports},c34e:function(e,t,a){},cd76:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/SEMAccount/GetListByType",method:"get",params:e})}},d31b:function(e,t,a){"use strict";var r=a("c34e"),n=a.n(r);n.a},d6df:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var r=a("b775");function n(e){return Object(r["b"])({url:"/SEMPlan/GetListByAccount",method:"get",params:e})}}}]);
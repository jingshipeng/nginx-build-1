(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-80495b6e"],{"10f8":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var r=a("b775");function n(t){return Object(r["b"])({url:"/brand",method:"get",params:t})}},"2edf":function(t,e,a){"use strict";a.d(e,"a",function(){return n});var r=a("b775");function n(t){return Object(r["b"])({url:"/crmClass",method:"get",params:t})}},"4b8c":function(t,e,a){},bd2d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"components-form-demo-advanced-search"}},[a("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:t.form},on:{submit:t.handleSearch}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"日期"}},[a("a-range-picker",{style:{width:"256px"},model:{value:t.defaultDate,callback:function(e){t.defaultDate=e},expression:"defaultDate"}},[a("template",{slot:"renderExtraFooter"},[t._v("可选区间90天")])],2)],1)],1),a("a-col",{attrs:{span:8}},[a("a-button",{on:{click:function(e){return t.timeSearch(-1)}}},[t._v("上一天")]),a("a-button",{style:{marginLeft:"8px"},on:{click:function(e){return t.timeSearch(1)}}},[t._v("下一天")]),a("a-button",{style:{marginLeft:"8px"},attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("搜索")]),a("a-button",{style:{marginLeft:"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")]),a("a",{style:{marginLeft:"8px",fontSize:"12px"},on:{click:t.toggle}},[t._v("\n            高级搜索\n            "),a("a-icon",{attrs:{type:t.expand?"up":"down"}})],1)],1)],1),a("a-row",{style:{display:t.count?"block":"none"},attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"平台"}},[a("a-select",{on:{focus:function(e){return t.loadSelectDataCrmClass(20025)}},model:{value:t.queryParam.nexId,callback:function(e){t.$set(t.queryParam,"nexId",e)},expression:"queryParam.nexId"}},t._l(t.CrmClass20025,function(e){return a("a-select-option",{key:e.key,attrs:{value:e.value}},[t._v(t._s(e.name))])}),1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"品牌"}},[a("a-auto-complete",{attrs:{placeholder:"输入品牌名称"},on:{search:t.handleSearchBrand},model:{value:t.queryParam.brand,callback:function(e){t.$set(t.queryParam,"brand",e)},expression:"queryParam.brand"}},[a("template",{slot:"dataSource"},t._l(t.brandSource,function(e){return a("a-select-option",{key:e.brandId+""},[t._v(t._s(e.brandName))])}),1)],2)],1)],1)],1)],1)],1),a("s-table",{ref:"table",attrs:{orignColumns:t.columns,data:t.loadData,scroll:{x:110},pageSize:20,bordered:"",size:"middle"},scopedSlots:t._u([{key:"notConnectCountRatio",fn:function(e){return a("span",{},[a("ellipsis",{attrs:{length:5,tooltip:""}},[t._v(t._s(e))])],1)}},{key:"brandName",fn:function(e,r){return a("span",{},[a("router-link",{attrs:{to:{path:"/Analysis/Clue/"+r.brandId+"/BrandDetail",query:{brandid:r.brandId,title:e+"-线索分析"}}}},[t._v(t._s(e))])],1)}}])})],1)},n=[],o=(a("7f7f"),a("a481"),a("28a5"),a("c5f6"),a("2af9")),u=a("e01a"),i=a("2edf"),s=a("10f8"),c=a("c1df"),l=a.n(c),d=a("ca00"),m={name:"clue-out-txid-list",components:{STable:o["q"],Ellipsis:o["g"]},data:function(){var t=this;return{dateFormat:"yyyy-MM-DD",expand:!1,form:this.$form.createForm(this),brandSource:[],queryParam:{},otherParam:{sectionDay:-1,isRefreshData:!1,isMonitorTime:!1,startDayTime:"",endDayTime:"",isOneDayTime:!1},columns:[],loadData:function(e){if(0==t.defaultDate.length&&(t.defaultDate=t.generatorDate(-1)),!t.queryParam.brand||Number(t.queryParam.brand))return Object(u["b"])(Object.assign(e,t.queryParam)).then(function(t){return t});t.$notification.info({message:"提示",description:"请选择一个品牌"})},CrmClass20025:[],defaultDate:[]}},watch:{defaultDate:function(t){if(0!=t.length)return this.otherParam.startDayTime=t[0].format(this.dateFormat),this.otherParam.endDayTime=t[1].format(this.dateFormat),this.queryParam.ClueTime=this.otherParam.startDayTime+","+this.otherParam.endDayTime,void(this.otherParam.startDayTime==this.otherParam.endDayTime&&(this.otherParam.isOneDayTime=!0));delete this.queryParam.ClueTime}},created:function(){var t=this;Object(u["a"])().then(function(e){if(e.success){var a=e.data.filter(function(t){return"brandName"==t.dataIndex})[0];a.align="left",a.fixed="left",a.enableCustomRender=!0,a.scopedSlots={customRender:"brandName"},e.data.filter(function(t){return"nexName"==t.dataIndex})[0].align="left",t.columns=e.data}})},computed:{count:function(){return this.expand}},methods:{moment:l.a,timeSearch:function(t){this.defaultDate=this.generatorDate(t,new Date(this.otherParam.startDayTime)),this.$refs.table.refresh(!0)},generatorDate:function(t,e){e||(e=new Date),this.otherParam.sectionDay=t,this.queryParam.ClueTime=Object(d["b"])(t,e);var a=this.queryParam.ClueTime.split(",");return[this.moment(a[0],this.dateFormat),this.moment(a[1],this.dateFormat)]},handleSearch:function(t){t.preventDefault(),this.form.validateFields(function(t,e){console.log("error",t),console.log("Received values of form: ",e)})},toggle:function(){this.expand=!this.expand},loadSelectDataCrmClass:function(t){var e=this;0==this["CrmClass"+t].length&&Object(i["a"])({ParentId:t}).then(function(a){a.data&&a.data.length>0&&(e["CrmClass"+t]=a.data)})},handleSearchBrand:function(t){var e=this,a=/[\u4E00-\u9FA5\uF900-\uFA2D]/,r=/[0-9]/;(a.test(t)||r.test(t))&&(a.test(t)&&(t=t.replace(/[0-9]/g,"").replace("[]","")),Object(s["a"])({BrandName:t}).then(function(t){e.brandSource=t.data.map(function(t){return{brandId:t.brandId,brandName:"["+t.brandId+"]"+t.name}})}))}}},f=m,h=(a("d762"),a("2877")),b=Object(h["a"])(f,r,n,!1,null,null,null);e["default"]=b.exports},d762:function(t,e,a){"use strict";var r=a("4b8c"),n=a.n(r);n.a},e01a:function(t,e,a){"use strict";a.d(e,"f",function(){return n}),a.d(e,"e",function(){return o}),a.d(e,"b",function(){return u}),a.d(e,"a",function(){return i}),a.d(e,"d",function(){return s}),a.d(e,"c",function(){return c});var r=a("b775");function n(t){return Object(r["b"])({url:"/clueoutfeeback/GetNexCount",method:"get",params:t})}function o(t){return Object(r["b"])({url:"/clueoutfeeback/NexColunms",method:"get",params:t})}function u(t){return Object(r["b"])({url:"/clueoutfeeback/GetBrandCount",method:"get",params:t})}function i(t){return Object(r["b"])({url:"/clueoutfeeback/BrandColunms",method:"get",params:t})}function s(t){return Object(r["b"])({url:"/clueoutfeeback/GetDateCount",method:"get",params:t})}function c(t){return Object(r["b"])({url:"/clueoutfeeback/DateColunms",method:"get",params:t})}}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c70f9fc"],{1113:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{attrs:{id:"components-form-demo-advanced-search"}},[r("a-form",{staticClass:"ant-advanced-search-form",attrs:{form:e.form},on:{submit:e.handleSearch}},[r("a-row",{attrs:{gutter:24}},[r("a-col",{attrs:{span:8}},[r("a-form-item",{attrs:{label:"日期"}},[r("a-range-picker",{style:{width:"256px"},model:{value:e.defaultDate,callback:function(t){e.defaultDate=t},expression:"defaultDate"}},[r("template",{slot:"renderExtraFooter"},[e._v("可选区间90天")])],2)],1)],1),r("a-col",{attrs:{span:8}},[r("a-button",{on:{click:function(t){return e.timeSearch(-1)}}},[e._v("上一天")]),r("a-button",{style:{marginLeft:"8px"},on:{click:function(t){return e.timeSearch(1)}}},[e._v("下一天")]),r("a-button",{style:{marginLeft:"8px"},attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("搜索")]),r("a-button",{style:{marginLeft:"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),r("a",{style:{marginLeft:"8px",fontSize:"12px"},on:{click:e.toggle}},[e._v("\n            高级搜索\n            "),r("a-icon",{attrs:{type:e.expand?"up":"down"}})],1)],1)],1),r("a-row",{style:{display:e.count?"block":"none"},attrs:{gutter:24}},[r("a-col",{attrs:{span:8}},[r("a-form-item",{attrs:{label:"关键词"}},[r("a-auto-complete",{attrs:{placeholder:"输入关键词"},on:{search:e.handleSearchKeyword},model:{value:e.queryParam.onlyKeywordId,callback:function(t){e.$set(e.queryParam,"onlyKeywordId",t)},expression:"queryParam.onlyKeywordId"}},[r("template",{slot:"dataSource"},e._l(e.otherParam.keywordSource,function(t){return r("a-select-option",{key:t.keywordId+""},[e._v(e._s(t.keyword))])}),1)],2)],1)],1),r("a-col",{attrs:{span:8}},[r("a-form-item",{attrs:{label:"搜索词"}},[r("a-auto-complete",{attrs:{placeholder:"输入搜索词"},on:{search:e.handleSearchQuery},model:{value:e.queryParam.onlyQuerywordId,callback:function(t){e.$set(e.queryParam,"onlyQuerywordId",t)},expression:"queryParam.onlyQuerywordId"}},[r("template",{slot:"dataSource"},e._l(e.otherParam.querySource,function(t){return r("a-select-option",{key:t.keywordId+""},[e._v(e._s(t.keyword))])}),1)],2)],1)],1)],1)],1)],1),r("s-table",{ref:"table",attrs:{orignColumns:e.columns,data:e.loadData,scroll:{x:110},pageSize:20,bordered:"",size:"middle"},scopedSlots:e._u([{key:"notConnectCountRatio",fn:function(t){return r("span",{},[r("ellipsis",{attrs:{length:5,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"brandName",fn:function(t,a){return r("span",{},[r("router-link",{attrs:{to:{path:"/Analysis/Clue/"+a.brandId+"/BrandDetail",query:{brandid:a.brandId,title:t+"-线索分析"}}}},[e._v(e._s(t))])],1)}}])})],1)},n=[],o=(r("a481"),r("28a5"),r("2af9")),u=r("732a"),i=r("c1df"),s=r.n(i),c=r("ca00"),l={name:"clue-out-txid-list",components:{STable:o["q"],Ellipsis:o["g"]},data:function(){var e=this;return{dateFormat:"YYYY-MM-DD",dateIntFormat:"YYYYMMDD",dateJsFormat:"yyyyMMdd",expand:!1,form:this.$form.createForm(this),queryParam:{startTime:"",endTime:""},otherParam:{sectionDay:-1,isRefreshData:!1,isMonitorTime:!1,isOneDayTime:!1,keywordSource:[],querySource:[],keyupValue:[]},columns:[],loadData:function(t){e.queryParam.startTime||(e.defaultDate=e.generatorDate(-1));var r=/[0-9]/;if(!e.queryParam.onlyKeywordId||r.test(e.queryParam.onlyKeywordId)){if(!e.queryParam.onlyQuerywordId||r.test(e.queryParam.onlyQuerywordId))return Object(u["a"])(Object.assign(t,e.queryParam)).then(function(e){return e});e.$notification.info({message:"提示",description:"请选择一个搜索词"})}else e.$notification.info({message:"提示",description:"请选择一个关键词"})},defaultDate:[]}},watch:{defaultDate:function(e){if(0!=e.length)return this.otherParam.originTime=e[0].format(this.dateFormat),this.queryParam.startTime=e[0].format(this.dateIntFormat),void(this.queryParam.endTime=e[1].format(this.dateIntFormat));delete this.queryParam.ClueTime}},created:function(){var e=this;Object(u["b"])().then(function(t){t.success&&(e.columns=t.data)})},computed:{count:function(){return this.expand}},methods:{moment:s.a,timeSearch:function(e){this.defaultDate=this.generatorDate(e,new Date(this.otherParam.originTime)),this.$refs.table.refresh(!0)},generatorDate:function(e,t){t||(t=new Date),this.otherParam.sectionDay=e;var r=Object(c["b"])(e,t).split(",");return this.queryParam.startTime=r[0].replace(/-/g,""),this.queryParam.endTime=r[1].replace(/-/g,""),[this.moment(r[0],this.dateFormat),this.moment(r[1],this.dateFormat)]},handleSearch:function(e){e.preventDefault(),this.form.validateFields(function(e,t){console.log("error",e),console.log("Received values of form: ",t)})},toggle:function(){this.expand=!this.expand},handleSearchKeyword:function(e){this.handleSearchKeywordByType(e,1)},handleSearchQuery:function(e){this.handleSearchKeywordByType(e,2)},handleSearchKeywordByType:function(e,t){var r=this,a=/[\u4E00-\u9FA5\uF900-\uFA2D]/,n=/[0-9]/;(a.test(e)||n.test(e))&&(a.test(e)&&(e=e.replace(/[0-9]/g,"").replace("[]","").replace(/[a-zA-Z]/g,"")),this.otherParam.keyupValue[this.otherParam.keyupValue.length-1]!=e&&(this.otherParam.keyupValue.push(e),setTimeout(function(){Object(u["e"])({keyword:r.otherParam.keyupValue[r.otherParam.keyupValue.length-1].replace(/ /g,"")}).then(function(e){var a=e.data.map(function(e){return{keywordId:e.keywordId,keyword:"["+e.keywordId+"]"+e.keyword}});switch(t){case 1:r.otherParam.keywordSource=a;break;case 2:r.otherParam.querySource=a;break}for(var n=r.otherParam.keyupValue.length-1;n>=0;n--)n>0&&r.otherParam.keyupValue.splice(0,1)})},1e3)))}}},d=l,m=(r("46f8"),r("2877")),y=Object(m["a"])(d,a,n,!1,null,null,null);t["default"]=y.exports},"46f8":function(e,t,r){"use strict";var a=r("c8f4"),n=r.n(a);n.a},"732a":function(e,t,r){"use strict";r.d(t,"e",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return u}),r.d(t,"c",function(){return i}),r.d(t,"d",function(){return s});var a=r("b775");function n(e){return Object(a["b"])({url:"/SEMKeyword/GetKeywordSearch",method:"get",params:e})}function o(e){return Object(a["b"])({url:"/KeywordSummary/GetKeyword",method:"get",params:e})}function u(e){return Object(a["b"])({url:"/KeywordSummary/KeywordColunms",method:"get",params:e})}function i(e){return Object(a["b"])({url:"/KeywordSummary/GetQuery",method:"get",params:e})}function s(e){return Object(a["b"])({url:"/KeywordSummary/QueryColunms",method:"get",params:e})}},c8f4:function(e,t,r){}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24fb6c88"],{"04da":function(t,e,a){"use strict";a.d(e,"c",function(){return i}),a.d(e,"e",function(){return o}),a.d(e,"a",function(){return s}),a.d(e,"b",function(){return c}),a.d(e,"d",function(){return l});var n=a("b775"),r={columns:"/v1/tracktype/colunms",trackType:"/v1/tracktype",platforms:"/v1/tracktype/platforms"};function i(){return Object(n["b"])({url:r.columns,method:"get"})}function o(t){return Object(n["b"])({url:r.trackType,method:"get",params:t})}function s(t,e){return Object(n["b"])({url:r.trackType,method:t?"put":"post",data:e})}function c(t){return Object(n["b"])({url:r.trackType,method:"delete",params:t})}function l(){return Object(n["b"])({url:r.platforms,method:"get"})}},"5bd9":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header-index-wide"},[a("a-card",{attrs:{bordered:!1}},[a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"终端类型"}},[a("a-select",{attrs:{placeholder:"请选择"},model:{value:t.queryParam.platform,callback:function(e){t.$set(t.queryParam,"platform",e)},expression:"queryParam.platform"}},t._l(t.platformOptions,function(e){return a("a-select-option",{key:e.key},[t._v(t._s(e.value))])}),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons"},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){return t.$refs.table.refresh(!0)}}},[t._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return t.queryParam={}}}},[t._v("重置")])],1)])],1)],1)],1),a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:function(e){return t.$refs.createTrackType.add()}}},[t._v("添加")])],1),a("s-table",{ref:"table",attrs:{size:"default",rowKey:"key",showPagination:"auto",orignColumns:t.orignColumns,data:t.loadData,showQuickJumper:!0,defaultColumnWidth:200,pageSize:20,bordered:""},scopedSlots:t._u([{key:"id",fn:function(e){return a("span",{},[a("ellipsis",{attrs:{length:20,tooltip:""}},[t._v(" "+t._s(t.formatId(e)))])],1)}},{key:"des",fn:function(e){return a("span",{},[a("ellipsis",{attrs:{length:40,tooltip:""}},[t._v(t._s(e))])],1)}},{key:"action",fn:function(e,n){return a("span",{},[[a("a",{on:{click:function(e){return t.$refs.createTrackType.edit(n)}}},[t._v("编辑")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{on:{click:function(e){return t.handleDel(n)}}},[t._v("删除")])]],2)}},{key:"filterDropdown",fn:function(e){var n=e.setSelectedKeys,r=e.selectedKeys,i=e.confirm,o=e.clearFilters,s=e.column;return a("div",{staticClass:"custom-filter-dropdown"},[a("a-input",{directives:[{name:"ant-ref",rawName:"v-ant-ref",value:function(e){return t.searchInput=e},expression:"c => searchInput = c"}],staticStyle:{width:"188px","margin-bottom":"8px",display:"block"},attrs:{placeholder:"按 "+s.title+" 搜索",value:r[0]},on:{change:function(t){return n(t.target.value?[t.target.value]:[])},pressEnter:function(){return t.handleSearch(s.dataIndex,r,i)}}}),a("a-button",{staticStyle:{width:"90px","margin-right":"8px"},attrs:{type:"primary",icon:"search",size:"small"},on:{click:function(){return t.handleSearch(s.dataIndex,r,i)}}},[t._v("查询")]),a("a-button",{staticStyle:{width:"90px"},attrs:{size:"small"},on:{click:function(){return t.handleReset(s.dataIndex,o)}}},[t._v("重置")])],1)}},{key:"filterIcon",fn:function(t){return a("a-icon",{style:{color:t?"#108ee9":void 0},attrs:{type:"search"}})}}])}),a("create-track-type",{ref:"createTrackType",on:{ok:t.handleOk}})],1)],1)},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-modal",{attrs:{title:t.title,width:500,visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleSubmit,cancel:t.handleCancel}},[a("a-spin",{attrs:{spinning:t.confirmLoading}},[a("template",{slot:"footer"},[a("a-button",{key:"back",on:{click:t.handleCancel}},[t._v("取消")]),a("a-button",{key:"submit",attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("\n        "+t._s(t.isEdit?"保存":"添加")+"\n      ")])],1),a("a-form",{attrs:{form:t.form}},[a("a-form-item",{attrs:{label:"日志编码",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",{rules:[{required:!0,message:"编码为3-4位数字",pattern:/^[1-9]\d{2,3}$/,whitespace:!0}]}],expression:"['id', {rules: [{required: true,message:'编码为3-4位数字',pattern: /^[1-9]\\d{2,3}$/, whitespace: true}]}]"}],attrs:{disabled:t.isEdit,placeholder:"请输入日志编码"}})],1),a("a-form-item",{attrs:{label:"编码描述",labelCol:t.labelCol,wrapperCol:t.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["des",{rules:[{required:!0,message:"不能为空",whitespace:!0}]}],expression:"['des', {rules: [{required: true,message:'不能为空', whitespace: true}]}]"}],attrs:{placeholder:"请输入编码描述"}})],1)],1)],2)],1)},o=[],s=a("04da"),c=a("5118"),l={data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,confirmLoading:!1,isEdit:!1,form:this.$form.createForm(this)}},computed:{title:function(){return"".concat(this.isEdit?"编辑":"新增","日志编码")}},methods:{add:function(){this.visible=!0,this.isEdit=!1},edit:function(t){var e=this;this.isEdit=!0,this.visible=!0,Object(c["setTimeout"])(function(){e.form.setFieldsValue({id:t.id,des:t.des})},100)},handleSubmit:function(){var t=this,e=this.form.validateFields;this.confirmLoading=!0,e(function(e,a){e?t.confirmLoading=!1:(a.createTime=new Date,Object(s["a"])(t.isEdit,a).then(function(e){e.success?(t.$message.success((t.isEdit?"编辑":"新增")+"成功"),t.close(),t.$emit("ok",e.data)):t.$message.error(e.msg)}).catch(function(){}).finally(function(){t.confirmLoading=!1}))})},handleCancel:function(){this.close()},close:function(){this.form.setFieldsValue({id:"",des:""}),this.visible=!1}}},u=l,d=a("2877"),f=Object(d["a"])(u,i,o,!1,null,null,null),p=f.exports,m=a("2af9"),h={name:"TrackTypeList",components:{STable:m["h"],Ellipsis:m["e"],CreateTrackType:p},data:function(){var t=this;return{visible:!1,searchInput:null,queryParam:{},orignColumns:[],loadData:function(e){return Object(s["e"])(Object.assign(e,t.queryParam)).then(function(t){return t})},selectedRowKeys:[],selectedRows:[],platformOptions:[]}},computed:{formatId:function(){return function(t){t*=1;for(var e=0;e<this.platformOptions.length;e++){var a=this.platformOptions[e];if(t>=a.key)return"".concat(t,"|").concat(a.value)}return"".concat(t,"|未知")}}},filters:{},created:function(){var t=this;Object(s["c"])().then(function(e){e.data.map(function(e){e.scopedSlots&&e.scopedSlots.filterDropdown&&"filterDropdown"===e.scopedSlots.filterDropdown&&(e.onFilterDropdownVisibleChange=function(e){e&&setTimeout(function(){t.searchInput.focus()},0)})}),e.data.push({title:"操作",dataIndex:"action",scopedSlots:{customRender:"action"},enableCustomRender:!0}),t.orignColumns=e.data}),Object(s["d"])().then(function(e){t.platformOptions=e.data})},methods:{handleSearch:function(t,e,a){a(),this.queryParam[t]=e[0]},handleReset:function(t,e){e(),this.queryParam[t]=""},handleOk:function(){this.$refs.table.refresh()},handleDel:function(t){console.log("删除",t);var e=this;this.$confirm({title:"警告",content:"真的要删除 ".concat(t.id," 吗?"),okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){Object(s["b"])({id:t.id}).then(function(t){t.success?(e.$message.success("删除成功"),e.$refs.table.refresh()):e.$message.error(t.msg)})},onCancel:function(){console.log("Cancel")}})}}},b=h,v=Object(d["a"])(b,n,r,!1,null,null,null);e["default"]=v.exports}}]);